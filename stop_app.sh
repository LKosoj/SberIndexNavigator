#!/bin/bash

# üõë SberIndexNavigator - –°–∫—Ä–∏–ø—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
# –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Streamlit

echo "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ SberIndexNavigator..."

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã streamlit
pkill -f "streamlit run" 2>/dev/null

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
if [ $? -eq 0 ]; then
    echo "‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ"
else
    echo "‚ÑπÔ∏è  –ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
fi

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å –ø–æ—Ä—Ç–æ–≤
echo "üìç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞ 8501..."
if lsof -i :8501 >/dev/null 2>&1; then
    echo "‚ö†Ô∏è  –ü–æ—Ä—Ç 8501 –≤—Å–µ –µ—â–µ –∑–∞–Ω—è—Ç"
    echo "–ü—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞ –ø–æ—Ä—Ç—É 8501:"
    lsof -i :8501
else
    echo "‚úÖ –ü–æ—Ä—Ç 8501 —Å–≤–æ–±–æ–¥–µ–Ω"
fi

echo "üëã –ì–æ—Ç–æ–≤–æ!" 