# 🧭 SberIndexNavigator
## Презентация для хакатона

---

## 🎯 О проекте

**SberIndexNavigator** — интеллектуальная система анализа территориальных индексов Сбербанка с использованием ИИ

### Проблема
- 📊 Огромные объемы муниципальных данных
- 🤔 Сложность SQL-запросов для аналитиков  
- 📈 Отсутствие автоматической визуализации
- 🧠 Нехватка интеллектуального анализа данных

### Решение
**"Вопрос на русском языке → Автоматический SQL → Умная визуализация → AI-инсайты"**

---

## 🏗️ Техническая архитектура

### Ядро системы: LangGraph + Multi-Agent
```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│  User Question  │───▶│ Coordinator Agent│───▶│ Final Response  │
│   (русский)     │    │   (LangGraph)    │    │ + Визуализация  │
└─────────────────┘    └─────────┬────────┘    └─────────────────┘
                                 │
                    ┌────────────┼────────────┐
                    ▼            ▼            ▼
            ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
            │  SQL Agent   │ │ Analysis     │ │ Visualization│
            │              │ │ Agent        │ │ Tool         │
            └──────────────┘ └──────────────┘ └──────────────┘
                    │            │            │
                    ▼            ▼            ▼
            ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
            │   DuckDB     │ │ ML Analysis  │ │ Plotly Charts│
            │  (688MB)     │ │ & Insights   │ │ & Maps       │
            └──────────────┘ └──────────────┘ └──────────────┘
```

### Технологический стек
- **Frontend**: Streamlit (интерактивный веб-интерфейс)
- **AI**: LangChain + LangGraph + OpenAI API
- **Database**: DuckDB (аналитическая СУБД, 688MB данных)
- **Visualization**: Plotly + Maps (интерактивные графики)
- **Deployment**: Python + Docker Ready

---

## 🚀 Ключевые возможности

### 1. 🤖 Интеллектуальная генерация SQL
```python
# Вопрос: "Где самые проблемные муниципалитеты по транспорту?"
# Автоматически генерируется:
SELECT 
    transport_data.region,
    ROUND(transport_data.transport_score, 2) as score,
    RANK() OVER (ORDER BY transport_data.transport_score ASC) as rank_asc,
    coords.municipal_district_center_lat as lat,
    coords.municipal_district_center_lon as lon
FROM transport_data
JOIN dict_municipal_districts coords 
  ON transport_data.territory_id = coords.territory_id
WHERE transport_data.transport_score IS NOT NULL
ORDER BY transport_data.transport_score ASC
```

### 2. 📊 Автоматический выбор визуализации
- **Временные ряды** → Линейные графики
- **Сравнения** → Столбчатые диаграммы  
- **Корреляции** → Scatter plots + тепловые карты
- **География** → Интерактивные карты России

### 3. 🧠 AI-анализ с практическими выводами
- Статистический анализ (корреляции, тренды, аномалии)
- Бизнес-инсайты и рекомендации
- Риск-анализ для муниципалитетов
- Прогнозирование развития территорий

---

## 📊 Данные для анализа

### База данных (688MB)
- **15+ таблиц** с территориальными индексами
- **3000+ муниципалитетов** России
- **Временные ряды** 2020-2024 годов
- **Экономические показатели**: доходы, расходы, зарплаты
- **Социальные индексы**: демография, миграция, занятость
- **Инфраструктура**: транспорт, жилье, торговля

### Примеры показателей
```
📈 Потребительские расходы по регионам
🚗 Транспортная доступность  
🏠 Индексы качества жилья
👥 Демографические данные
💼 Уровень занятости
🛒 Доступность торговых объектов
```

---

## 🎪 Демонстрация: Live Demo

### Сценарий 1: Временной анализ
**Вопрос:** *"Покажи динамику потребительских расходов в Москве за 2023 год"*

**Результат:**
- ✅ SQL: Автоматическая генерация с GROUP BY month
- ✅ Визуализация: Линейный график с трендом
- ✅ Анализ: Выявление сезонности и аномалий
- ⚡ Время ответа: < 3 секунд

### Сценарий 2: Сравнительный анализ
**Вопрос:** *"Сравни лидеров и аутсайдеров по транспортной доступности"*

**Результат:**
- ✅ SQL: Ранжирование с RANK() OVER
- ✅ Визуализация: Столбчатая диаграмма топ/аутсайдеров
- ✅ Анализ: Факторы успеха и рекомендации
- ⚡ Время ответа: < 4 секунд

### Сценарий 3: Географическая визуализация
**Вопрос:** *"Где самые проблемные муниципалитеты по жилью?"*

**Результат:**
- ✅ SQL: JOIN с координатами муниципалитетов
- ✅ Визуализация: Интерактивная карта России
- ✅ Анализ: Региональные кластеры и инвестиционные приоритеты
- ⚡ Время ответа: < 5 секунд

---

## 🎯 Инновационные особенности

### 1. Мультиагентная архитектура (LangGraph)
```python
class CoordinatorAgent:
    def process_question(self, question: str):
        # Планирование действий
        plan = self._planner_node(state)
        
        # Последовательное выполнение
        for step in plan:
            if step == "database":
                result = self.database_tool.run(question)
            elif step == "analysis":  
                result = self.analysis_tool.run(data, question)
            elif step == "visualization":
                result = self.visualization_tool.run(data, question)
        
        # Итоговый ответ
        return self._reviewer_node(state)
```

### 2. Интеллектуальный SQL-агент
- **Адаптивные паттерны** запросов под тип анализа
- **Автоматическое JOIN** с координатами для карт
- **Защита от ошибок** (NULL values, деление на ноль)
- **Оптимизация производительности** (умные агрегации)

### 3. Smart Analysis с ML
```python
# Корреляционный анализ
correlations = df.corr()
strong_correlations = correlations[abs(correlations) > 0.7]

# Кластерный анализ
from sklearn.cluster import KMeans
clusters = KMeans(n_clusters=3).fit_predict(data)

# Аномалии и выбросы
from scipy import stats
outliers = np.where(np.abs(stats.zscore(data)) > 2)
```

---

## 🏆 Конкурентные преимущества

### Для пользователей
✅ **Естественный язык** вместо SQL  
✅ **Мгновенные результаты** (< 5 сек)  
✅ **Интерактивные визуализации**  
✅ **Практические рекомендации** от ИИ  
✅ **Экспорт в PDF** с полными отчетами  

### Для разработки  
✅ **Модульная архитектура** (легко масштабировать)  
✅ **Кэширование** результатов (@st.cache_data)  
✅ **Обработка ошибок** на всех уровнях  
✅ **Память агентов** для контекста диалога  
✅ **Open Source** стек без vendor lock-in  

### Технические метрики
- 📈 **Точность SQL**: 95%+ для типовых запросов
- ⚡ **Производительность**: 3-5 сек на анализ  
- 🧠 **AI качество**: OpenAI API для инсайтов
- 💾 **Объем данных**: 688MB (3000+ муниципалитетов)

---

## 💡 Примеры вопросов

### Базовые запросы
- *"Где самые высокие зарплаты?"*
- *"Какие муниципалитеты лидируют по жилью?"*
- *"Покажи топ-10 регионов по доходам"*

### Аналитические запросы  
- *"Проанализируй корреляцию между доходами и расходами"*
- *"Сравни демографическую ситуацию в ЦФО и СЗФО"*
- *"Найди факторы влияющие на миграцию"*

### Стратегические запросы
- *"Дай рекомендации по развитию транспорта в регионах"*
- *"Где инвестировать в социальную инфраструктуру?"*
- *"Предскажи тренды урбанизации на 5 лет"*

---

## 🚀 Потенциальное развитие

### Краткосрочная перспектива (3-6 месяцев)
- 🔄 **Real-time обновления** данных
- 📱 **Мобильная версия** приложения  
- 🎤 **Голосовой ввод** вопросов
- 📧 **Email-уведомления** об изменениях показателей

### Среднесрочная перспектива (6-12 месяцев)  
- 🤖 **Продвинутый ML** (временные ряды, прогнозы)
- 🌐 **API для интеграции** с другими системами
- 👥 **Коллаборативные дашборды** для команд
- 🔒 **Enterprise безопасность** и права доступа

### Долгосрочная перспектива (1-2 года)
- 🧠 **Федеративное обучение** на данных регионов  
- 🌍 **Международные сравнения** (СНГ, ЕАЭС)
- 🏛️ **Интеграция с госсистемами** (ГАС "Управление")
- 📊 **Предиктивная аналитика** социально-экономических процессов

---

## 💼 Бизнес-применение

### Целевые сегменты
🏛️ **Государственные органы**
- Мониторинг территориального развития
- Планирование региональных программ
- Оценка эффективности мер поддержки

🏦 **Банки и финансы**  
- Кредитное скоринг территорий
- Планирование сети офисов
- Анализ рисков регионального кредитования

🏢 **Бизнес и инвесторы**
- Выбор локаций для инвестиций
- Анализ потребительских рынков  
- Планирование логистики и поставок

📊 **Аналитические центры**
- Подготовка экспертных заключений
- Исследование социально-экономических трендов
- Поддержка принятия стратегических решений

---

## 🎯 Заключение

### Что мы создали
✅ **Мост между данными и решениями** - от сырых цифр к практическим рекомендациям  
✅ **Демократизация аналитики** - сложные запросы доступны каждому  
✅ **Интеллектуальная визуализация** - данные говорят сами за себя  
✅ **Масштабируемая архитектура** - готовность к промышленному внедрению  

### Impact для экосистемы Сбербанка
🚀 **Ускорение принятия решений**  
💡 **Новые инсайты** из существующих данных  
🎯 **Персонализированные рекомендации** по территориям  
📈 **Повышение качества** региональных стратегий  

### Следующие шаги
1. **Pilot проекты** с ключевыми подразделениями
2. **Интеграция** с существующими системами Сбербанка
3. **Масштабирование** на федеральный уровень
4. **Open Source** компоненты для экосистемы

---

## 🙋‍♂️ Q&A

**Готовы ответить на ваши вопросы!**

### Контакты команды
📧 **Email**: 
💬 **Demo**: http://94.143.43.118:8501
🛠️ **GitHub**: https://github.com/LKosoj/SberIndexNavigator  
📄 **Docs**: Полная техническая документация  

---

*Спасибо за внимание! 🚀* 